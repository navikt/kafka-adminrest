FROM gradle:jdk11-slim as builder
USER root
ADD . /builder
WORKDIR /builder
RUN gradle build installDist --no-daemon

FROM navikt/java:11
ENV JAVA_OPTS="-Dlogback.configurationFile=logback-remote.xml"
COPY --from=builder /builder/build/install/kafka-adminrest/lib/ lib/
COPY --from=builder /builder/build/install/kafka-adminrest/bin/kafka-adminrest bin/app
