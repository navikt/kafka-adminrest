FROM gradle:jdk11-slim as builder
COPY --chown=gradle:gradle . /app
WORKDIR /app
RUN gradle build --no-daemon --console=plain

FROM navikt/java:11
ENV JAVA_OPTS="-Dlogback.configurationFile=logback-remote.xml"
COPY --from=builder /app/build/install/kafka-adminrest/bin/kafka-adminrest bin/app
COPY --from=builder /app/build/install/kafka-adminrest/lib lib/
